// ==UserScript==
// @name         TFM's torrent highlighter
// @namespace    TheFallingMan
// @version      0.1.1
// @description  Adds attributes to torrent links, allowing CSS styling.
// @author       TheFallingMan
// @icon         https://animebytes.tv/favicon.ico
// @match        https://animebytes.tv/*
// @license      GPL-3.0
// ==/UserScript==

!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:false,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=true,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})},__webpack_require__.r=function(e){Object.defineProperty(e,"__esModule",{value:true})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,r){"use strict";var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r,e}
// @license      GPL-3.0
var a=r(1);console.log(a),function(){var e,t,r,i,s,l=function(){function TorrentPropertyParser(e,t){!function(e,t){if(!(e instanceof TorrentPropertyParser))throw new TypeError("Cannot call a class as a function")}(this),this.linkElement=e,this.delim=t,this.spanTemplate=document.createElement("span"),this.spanTemplate.className="userscript-highlight torrent-field",this.docFrag=document.createDocumentFragment()}return n(TorrentPropertyParser,[{key:"parse",value:function(){this.fields=[],this.index=0,this.handlers={},this.nodeAppended=false;for(var e=p.INITIALISE,t=void 0;e;){(t=this.handlers[e])||(t=E[e]);try{e=t.call(this)}catch(e){throw console.error(e),e}this.index>=this.fields.length&&e!==p.FINISHED&&(e=E[p.INSERT_DOCFRAG].call(this))}}},{key:"getNext",value:function(){return this.fields[this.index++]}},{key:"peekNext",value:function(){return this.fields[this.index]}},{key:"newSpan",value:function(e,t,r){this.linkElement.dataset[t]=r;var n=this.spanTemplate.cloneNode(false);return n.dataset[t]=r,e.nodeType?(this.nodeAppended=true,n.appendChild(e)):n.textContent=e,n}},{key:"appendSpan",value:function(e,t,r){this.docFrag.appendChild(this.newSpan(e,t,r))}},{key:"appendText",value:function(e){this.docFrag.appendChild(document.createTextNode(e))}},{key:"appendDelim",value:function(){this.docFrag.appendChild(document.createTextNode(this.delim))}},{key:"clearChildren",value:function(){for(;this.linkElement.hasChildNodes();)this.linkElement.removeChild(this.linkElement.lastChild)}}]),TorrentPropertyParser}();function newCaptureHandler(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){return r&&this.appendDelim(),this.appendSpan(this.peekNext(),e,this.peekNext()),this.index++,t}}function newFlagHandler(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var a=this.peekNext();if(e===a)this.index++,this.appendDelim(),this.appendSpan(a,t,"");else if(null!==n)return n;return r}}function newListHandler(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var a=this.peekNext();if(-1!==e.indexOf(a))this.index++,this.appendDelim(),this.appendSpan(a,t,a);else if(null!==n)return n;return r}}for(var p=Object.freeze({INITIALISE:-11,DETECTING:-1,BEGIN:-2,COMMON_TRAILING_FIELDS:-3,INSERT_DOCFRAG:-5,FINISHED:false,ERROR:-10}),o=Object.freeze({ENCODING:1,BITRATE:2,SOURCE:3,LOG:4,CUE:5}),u=(_defineProperty(e={},p.BEGIN,newCaptureHandler("encoding",o.BITRATE,false)),_defineProperty(e,o.BITRATE,newCaptureHandler("bitrate",o.SOURCE)),_defineProperty(e,o.SOURCE,newCaptureHandler("source",o.LOG)),_defineProperty(e,o.LOG,newFlagHandler("Log","log",o.CUE)),_defineProperty(e,o.CUE,newFlagHandler("Cue","cue",p.COMMON_TRAILING_FIELDS)),e),c=Object.freeze({SOURCE:1,CONTAINER:2,ASPECT_RATIO:3,VIDEO_CODEC:4,RESOLUTION:5,AUDIO_CODEC_AND_CHANNELS:6,DUAL_AUDIO:7,SUBBING_AND_GROUP:8,REMASTER:9,TRAILING_FIELDS:10}),d=(_defineProperty(t={},p.BEGIN,newCaptureHandler("source",c.CONTAINER,false)),_defineProperty(t,c.CONTAINER,function(){var e=this.getNext();if(")"===e.charAt(e.length-1)){var t=e.substr(0,e.indexOf(" (")),r=e.slice(e.indexOf(" (")+2,-1);return this.appendDelim(),this.appendSpan(t,"container",t),this.appendText(" ("),this.appendSpan(r,"region",r),this.appendText(")"),c.ASPECT_RATIO}return this.appendDelim(),this.appendSpan(e,"container",e),c.VIDEO_CODEC}),_defineProperty(t,c.ASPECT_RATIO,function(){var e=this.getNext();return this.appendDelim(),this.appendSpan(e,"aspectRatio",e),"DVD5"===this.fields[0]||"DVD9"===this.fields[0]?c.RESOLUTION:c.VIDEO_CODEC}),_defineProperty(t,c.VIDEO_CODEC,newCaptureHandler("codec",c.RESOLUTION)),_defineProperty(t,c.RESOLUTION,newCaptureHandler("resolution",c.AUDIO_CODEC_AND_CHANNELS)),_defineProperty(t,c.AUDIO_CODEC_AND_CHANNELS,function(){var e=this.getNext(),t=e.substr(0,e.lastIndexOf(" ")),r=e.substr(e.lastIndexOf(" ")+1);return"."!==r.charAt(1)?p.ERROR:(this.appendDelim(),this.appendSpan(t,"audioCodec",t),this.appendText(" "),this.appendSpan(r,"audioChannels",r),c.DUAL_AUDIO)}),_defineProperty(t,c.DUAL_AUDIO,newFlagHandler("Dual Audio","dualAudio",c.REMASTER)),_defineProperty(t,c.REMASTER,function(){var e=this.peekNext();return"IMG"===e.tagName&&"Remastered"===e.alt&&(this.index++,this.appendDelim(),this.appendSpan(e,"remastered","")),c.SUBBING_AND_GROUP}),_defineProperty(t,c.SUBBING_AND_GROUP,function(){if(f.call(this))return p.COMMON_TRAILING_FIELDS;var e=this.getNext();if(!e.nodeType){var t=(e=e.trim()).substr(0,e.indexOf(" "));if("Softsubs"===t||"Hardsubs"===t||"RAW"===t){this.appendDelim(),this.appendSpan(t,"subbing",t),this.appendText(" (");for(var r=e.substr(e.indexOf(" (")+2);!r.endsWith(")")&&this.index<this.fields.length;)r+=this.delim,r+=this.getNext();r=r.substr(0,r.length-1),this.appendSpan(r,"group",r),this.appendText(")")}return p.COMMON_TRAILING_FIELDS}}),t),f=newListHandler(["Softsubs","Hardsubs","RAW"],"subbing",true,false),h=(_defineProperty(r={},p.BEGIN,newCaptureHandler("type",2,false)),_defineProperty(r,2,newCaptureHandler("platform",3)),_defineProperty(r,3,newListHandler(["Region Free","NTSC-J","NTSC-U","PAL","JPN","ENG","EUR"],"region",4)),_defineProperty(r,4,newListHandler(["Archived","Unarchived"],"archived",5)),_defineProperty(r,5,newFlagHandler("Scene","scene",p.COMMON_TRAILING_FIELDS)),r),g=Object.freeze({TRANSLATION:1,FORMAT:2,ONGOING:4}),x=(_defineProperty(i={},p.BEGIN,function(){var e=this.getNext();if(-1!==e.indexOf("  (")){var t=e.substr(0,e.indexOf("  (")),r=e.slice(e.indexOf("  (")+3,-1);this.appendSpan(t,"translation",t),this.appendText(" ("),this.appendSpan(r,"group",r),this.appendText(")")}else{var n=e.replace(" ","");this.appendSpan(n,"translation",n)}return g.FORMAT}),_defineProperty(i,g.FORMAT,newListHandler(["Archived Scans","EPUB","PDF","Unarchived","Digital"],"format",g.ONGOING)),_defineProperty(i,g.ONGOING,newFlagHandler("Ongoing","ongoing",p.COMMON_TRAILING_FIELDS)),i),_={"Blu-ray":d,Web:d,TV:d,DVD:d,"UHD Blu-ray":d,DVD5:d,DVD9:d,"HD DVD":d,VHS:d,VCD:d,LD:d,MP3:u,FLAC:u,AAC:u,Game:h,Patch:h,DLC:h,Raw:x,Translated:x},E=(_defineProperty(s={},p.INITIALISE,function(){this.oldNodes=this.linkElement.childNodes;for(var e=0;e<this.oldNodes.length;e++){var t=this.oldNodes[e];if(t.nodeType===Node.TEXT_NODE)if(-1!==t.nodeValue.indexOf(this.delim)){var r=t.nodeValue;0===e&&("»"===r.charAt(0)&&(r=r.replace("»",""),this.appendText("» ")),r=r.replace(/^\s+/,""));for(var n=r.split(this.delim),a=0;a<n.length;a++)n[a]&&this.fields.push(n[a])}else this.fields.push(t.nodeValue.trim());else this.fields.push(t)}0===this.linkElement.childElementCount&&(this.fields[this.fields.length-1]=this.fields[this.fields.length-1].replace(/\s+$/,""));var i=this.fields[this.fields.length-1];return"string"==typeof i&&i.endsWith(" - Snatched")&&(this.fields[this.fields.length-1]=i.substr(0,i.length-11),this.fields.push(" - Snatched")),p.DETECTING}),_defineProperty(s,p.DETECTING,function(){var e=this.peekNext(),t=_[e];if(void 0!==t)this.handlers=t;else{var r=e.substr(0,e.indexOf(" "));if(this.handlers=_[r],void 0===this.handlers)return this.handlers={},console.info("No first field match for: x"+e+"x"),p.ERROR}return p.BEGIN}),_defineProperty(s,p.ERROR,function(){if(this.nodeAppended){this.clearChildren();for(var e=0;e<this.oldNodes.length;e++)this.linkElement.appendChild(this.oldNodes[e])}return p.FINISHED}),_defineProperty(s,p.COMMON_TRAILING_FIELDS,function(){var e=this.peekNext();if(!e)return p.INSERT_DOCFRAG;switch(e.nodeType){case Node.ELEMENT_NODE:switch(this.appendDelim(),this.index++,e.tagName.toUpperCase()){case"IMG":if("Freeleech!"===e.alt)this.appendSpan(e,"freeleech","");else switch(e.src.substr(e.src.lastIndexOf("/")+1)){case"hentaic.png":this.appendSpan(e,"hentai","Censored");break;case"hentai.png":this.appendSpan(e,"hentai","Uncensored")}break;case"FONT":"Exclusive!"===e.textContent&&this.appendSpan(e,"exclusive","");break;default:this.appendSpan(e,"misc",e.textContent||"")}return p.COMMON_TRAILING_FIELDS;default:return this.index++,-1!==e.indexOf("- Snatched")?(this.appendText(" - "),this.appendSpan("Snatched","snatched","")):(this.appendDelim(),this.appendSpan(e,"misc",e)),p.COMMON_TRAILING_FIELDS}}),_defineProperty(s,p.INSERT_DOCFRAG,function(){return this.clearChildren(),this.linkElement.appendChild(this.docFrag),p.FINISHED}),s),A=document.querySelectorAll('.group_torrent>td>a[href*="&torrentid="]'),C=new l,N=0;N<A.length;N++){var O=A[N],S=O.firstChild.textContent.trimLeft();"»"===S[0]&&(S=S.replace("»","").trimLeft());var v=a.parse(S);O.classList.add("userscript-highlight"),O.classList.add("torrent-page"),O.firstChild.textContent="",O.insertAdjacentHTML("afterbegin",v)}for(var T=document.querySelectorAll('.torrent_properties>a[href*="&torrentid="]'),$=0;$<T.length;$++)T[$].className+="userscript-highlight torrent-page",C.linkElement=T[$],C.delim=" | ",C.parse();for(var I=document.querySelectorAll(':not(.group_torrent)>:not(.torrent_properties)>a[href*="&torrentid="]:not([title])'),m=0;m<I.length;m++){var b=I[m];b.classList.add("userscript-highlight"),b.classList.add("torrent-bbcode");var y=b.firstChild,D=-1!==b.href.indexOf("torrents.php");C.linkElement=b,C.delim=D?" | ":" / ";var P=y.nodeValue.trim(),R=P.indexOf("  ["),w=document.createDocumentFragment();if(-1!==R){var L=P.substr(0,R),F=P.substr(R+3,4),k=D?L.lastIndexOf(" - "):L.indexOf(" - "),G=L.substr(0,k),M=L.substr(k+3);w.appendChild(C.newSpan(G,D?"title":"artist",G)),w.appendChild(document.createTextNode(" - ")),w.appendChild(C.newSpan(M,D?"type":"album",M)),w.appendChild(document.createTextNode("  [")),w.appendChild(C.newSpan(F,"year",F)),w.appendChild(document.createTextNode("] [")),"]"===P.charAt(P.length-1)?y.nodeValue=P.substr(0,P.length-1):(y.nodeValue=P+" ",b.removeChild(b.lastChild)),y.splitText(L.length+10),b.removeChild(y),C.parse(),b.insertBefore(w,b.firstChild),-1!==R&&b.appendChild(document.createTextNode("]"))}}}()},function(e,t,r){"use strict";e.exports=function(){function peg$SyntaxError(e,t,r,n){this.message=e,this.expected=t,this.found=r,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}return function(e,t){function ctor(){this.constructor=e}ctor.prototype=Error.prototype,e.prototype=new ctor}(peg$SyntaxError),peg$SyntaxError.buildMessage=function(e,t){var r={literal:function(e){return'"'+literalEscape(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?classEscape(e.parts[t][0])+"-"+classEscape(e.parts[t][1]):classEscape(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function hex(e){return e.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+hex(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+hex(e)})}function classEscape(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+hex(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+hex(e)})}return"Expected "+function(e){var t,n,a,i=Array(e.length);for(t=0;t<e.length;t++)i[t]=r[(a=e[t]).type](a);if(i.sort(),i.length>0){for(t=1,n=1;t<i.length;t++)i[t-1]!==i[t]&&(i[n]=i[t],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+function(e){return e?'"'+literalEscape(e)+'"':"end of input"}(t)+" found."},{SyntaxError:peg$SyntaxError,parse:function(e,t){t=void 0!==t?t:{};var r,n={},a={Anime:peg$parseAnime},i=peg$parseAnime,s=function(e,t,r,n,a,i,s,l){var p,o="M2TS"===t[0]?"M2TS ("+t[1]+") | "+t[2]:t;return p="M2TS"===t[0]?{container:"M2TS",region:t[1],"aspect-ratio":t[2]}:{container:t},de(e,{source:e})+ce()+de(o,p)+ce()+de(r,"codec")+ce()+de(n,"resolution")+ce()+de(a[0],"audio-codec")+" "+de(a[1],"audio-channels")+ce()+(i?de(i[0],{"dual-audio":i[0]})+ce():"")+de(s[0],"subbing")+(s[1]?" ("+de(s[1],"group")+")":"")+(l?ce():"")},l={type:"any"},p=function(){return"$"},o=/^[a-zA-Z0-9\-]/,u=peg$classExpectation([["a","z"],["A","Z"],["0","9"],"-"],false,false),c=" ",d=peg$literalExpectation(" ",false),f="| ",h=peg$literalExpectation("| ",false),g=/^[a-zA-Z\-0-9 ]/,x=peg$classExpectation([["a","z"],["A","Z"],"-",["0","9"]," "],false,false),_=function(e,t){return[e,t]},E=/^[0-9]/,A=peg$classExpectation([["0","9"]],false,false),C=".",N=peg$literalExpectation(".",false),O="Dual Audio",S=peg$literalExpectation("Dual Audio",false),v="RAW",T=peg$literalExpectation("RAW",false),$="Softsubs",I=peg$literalExpectation("Softsubs",false),m="Hardsubs",b=peg$literalExpectation("Hardsubs",false),y=function(e,t){return[e,(t||[])[1]]},D="(",P=peg$literalExpectation("(",false),R=/^[^)]/,w=peg$classExpectation([")"],true,false),L=")",F=peg$literalExpectation(")",false),k=" | ",G=peg$literalExpectation(" | ",false),M=function(e){return e},H="M2TS (",U=peg$literalExpectation("M2TS (",false),B=") | ",V=peg$literalExpectation(") | ",false),q=":",j=peg$literalExpectation(":",false),W=function(e,t){return["M2TS",e,t]},z="|",Z=peg$literalExpectation("|",false),J=function(){return"|"},X=/^[ \t\n\r]/,K=peg$classExpectation([" ","\t","\n","\r"],false,false),Q=0,Y=[{line:1,column:1}],ee=0,te=[],re=0,ne={};if("startRule"in t){if(!(t.startRule in a))throw Error("Can't start parsing from rule \""+t.startRule+'".');i=a[t.startRule]}function peg$literalExpectation(e,t){return{type:"literal",text:e,ignoreCase:t}}function peg$classExpectation(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function peg$computePosDetails(t){var r,n=Y[t];if(n)return n;for(r=t-1;!Y[r];)r--;for(n={line:(n=Y[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Y[t]=n,n}function peg$fail(e){Q<ee||(Q>ee&&(ee=Q,te=[]),te.push(e))}function peg$parseAnime(){var t,r,a,i,l,p,o,u,f,h=11*Q+0,C=ne[h];return C?(Q=C.nextPos,C.result):(t=Q,(r=peg$parseText())!==n&&peg$parseSep()!==n?((a=function(){var t,r,a,i,s,l,p,o,u,c,d=11*Q+8,f=ne[d];if(f)return Q=f.nextPos,f.result;if(t=Q,e.substr(Q,6)===H?(r=H,Q+=6):(r=n,0===re&&peg$fail(U)),r!==n)if(R.test(e.charAt(Q))?(a=e.charAt(Q),Q++):(a=n,0===re&&peg$fail(w)),a!==n)if(e.substr(Q,4)===B?(i=B,Q+=4):(i=n,0===re&&peg$fail(V)),i!==n){if(s=Q,l=Q,p=[],E.test(e.charAt(Q))?(o=e.charAt(Q),Q++):(o=n,0===re&&peg$fail(A)),o!==n)for(;o!==n;)p.push(o),E.test(e.charAt(Q))?(o=e.charAt(Q),Q++):(o=n,0===re&&peg$fail(A));else p=n;if(p!==n)if(58===e.charCodeAt(Q)?(o=q,Q++):(o=n,0===re&&peg$fail(j)),o!==n){if(u=[],E.test(e.charAt(Q))?(c=e.charAt(Q),Q++):(c=n,0===re&&peg$fail(A)),c!==n)for(;c!==n;)u.push(c),E.test(e.charAt(Q))?(c=e.charAt(Q),Q++):(c=n,0===re&&peg$fail(A));else u=n;u!==n?l=p=[p,o,u]:(Q=l,l=n)}else Q=l,l=n;else Q=l,l=n;(s=l!==n?e.substring(s,Q):l)!==n?t=r=W(a,s):(Q=t,t=n)}else Q=t,t=n;else Q=t,t=n;else Q=t,t=n;return ne[d]={nextPos:Q,result:t},t}())===n&&(a=peg$parseText()),a!==n&&peg$parseSep()!==n&&(i=peg$parseText())!==n&&peg$parseSep()!==n&&(l=peg$parseText())!==n&&peg$parseSep()!==n&&(p=function(){var t,r,a,i,s,l,p,o=11*Q+3,u=ne[o];if(u)return Q=u.nextPos,u.result;if(t=Q,r=Q,a=[],i=Q,g.test(e.charAt(Q))?(s=e.charAt(Q),Q++):(s=n,0===re&&peg$fail(x)),s!==n?(l=Q,re++,p=peg$parseChannels(),re--,p===n?l=void 0:(Q=l,l=n),l!==n?i=s=[s,l]:(Q=i,i=n)):(Q=i,i=n),i!==n)for(;i!==n;)a.push(i),i=Q,g.test(e.charAt(Q))?(s=e.charAt(Q),Q++):(s=n,0===re&&peg$fail(x)),s!==n?(l=Q,re++,p=peg$parseChannels(),re--,p===n?l=void 0:(Q=l,l=n),l!==n?i=s=[s,l]:(Q=i,i=n)):(Q=i,i=n);else a=n;return(r=a!==n?e.substring(r,Q):a)!==n?(32===e.charCodeAt(Q)?(a=c,Q++):(a=n,0===re&&peg$fail(d)),a!==n&&(i=peg$parseChannels())!==n?t=r=_(r,i):(Q=t,t=n)):(Q=t,t=n),ne[o]={nextPos:Q,result:t},t}())!==n&&peg$parseSep()!==n?(o=Q,(u=function(){var t,r=11*Q+5,a=ne[r];return a?(Q=a.nextPos,a.result):(e.substr(Q,10)===O?(t=O,Q+=10):(t=n,0===re&&peg$fail(S)),ne[r]={nextPos:Q,result:t},t)}())!==n&&(f=peg$parseSep())!==n?o=u=[u,f]:(Q=o,o=n),o===n&&(o=null),o!==n&&(u=function(){var t,r,a,i,s,l=11*Q+6,p=ne[l];return p?(Q=p.nextPos,p.result):(t=Q,e.substr(Q,3)===v?(r=v,Q+=3):(r=n,0===re&&peg$fail(T)),r===n&&(e.substr(Q,8)===$?(r=$,Q+=8):(r=n,0===re&&peg$fail(I)),r===n&&(e.substr(Q,8)===m?(r=m,Q+=8):(r=n,0===re&&peg$fail(b)))),r!==n?(a=Q,32===e.charCodeAt(Q)?(i=c,Q++):(i=n,0===re&&peg$fail(d)),i!==n&&(s=function(){var t,r,a,i,s,l,p,o,u=11*Q+7,c=ne[u];if(c)return Q=c.nextPos,c.result;if(t=Q,40===e.charCodeAt(Q)?(r=D,Q++):(r=n,0===re&&peg$fail(P)),r!==n){if(a=Q,i=[],R.test(e.charAt(Q))?(s=e.charAt(Q),Q++):(s=n,0===re&&peg$fail(w)),s===n&&(s=Q,41===e.charCodeAt(Q)?(l=L,Q++):(l=n,0===re&&peg$fail(F)),l!==n?(p=Q,re++,e.substr(Q,3)===k?(o=k,Q+=3):(o=n,0===re&&peg$fail(G)),o===n&&(o=peg$parseEOF()),re--,o===n?p=void 0:(Q=p,p=n),p!==n?s=l=[l,p]:(Q=s,s=n)):(Q=s,s=n)),s!==n)for(;s!==n;)i.push(s),R.test(e.charAt(Q))?(s=e.charAt(Q),Q++):(s=n,0===re&&peg$fail(w)),s===n&&(s=Q,41===e.charCodeAt(Q)?(l=L,Q++):(l=n,0===re&&peg$fail(F)),l!==n?(p=Q,re++,e.substr(Q,3)===k?(o=k,Q+=3):(o=n,0===re&&peg$fail(G)),o===n&&(o=peg$parseEOF()),re--,o===n?p=void 0:(Q=p,p=n),p!==n?s=l=[l,p]:(Q=s,s=n)):(Q=s,s=n));else i=n;(a=i!==n?e.substring(a,Q):i)!==n?(41===e.charCodeAt(Q)?(i=L,Q++):(i=n,0===re&&peg$fail(F)),i!==n?t=r=M(a):(Q=t,t=n)):(Q=t,t=n)}else Q=t,t=n;return ne[u]={nextPos:Q,result:t},t}())!==n?a=i=[i,s]:(Q=a,a=n),a===n&&(a=null),a!==n?t=r=y(r,a):(Q=t,t=n)):(Q=t,t=n),ne[l]={nextPos:Q,result:t},t)}())!==n?((f=peg$parseSep())===n&&(f=null),f!==n&&peg$parseEOF()!==n?t=r=s(r,a,i,l,p,o,u,f):(Q=t,t=n)):(Q=t,t=n)):(Q=t,t=n)):(Q=t,t=n),ne[h]={nextPos:Q,result:t},t)}function peg$parseEOF(){var t,r,a,i=11*Q+1,s=ne[i];return s?(Q=s.nextPos,s.result):(t=Q,r=Q,re++,e.length>Q?(a=e.charAt(Q),Q++):(a=n,0===re&&peg$fail(l)),re--,a===n?r=void 0:(Q=r,r=n),r!==n&&(r=p()),ne[i]={nextPos:Q,result:t=r},t)}function peg$parseText(){var t,r,a,i,s,l,p=11*Q+2,g=ne[p];if(g)return Q=g.nextPos,g.result;if(t=Q,r=[],o.test(e.charAt(Q))?(a=e.charAt(Q),Q++):(a=n,0===re&&peg$fail(u)),a===n&&(a=Q,32===e.charCodeAt(Q)?(i=c,Q++):(i=n,0===re&&peg$fail(d)),i!==n?(s=Q,re++,e.substr(Q,2)===f?(l=f,Q+=2):(l=n,0===re&&peg$fail(h)),re--,l===n?s=void 0:(Q=s,s=n),s!==n?a=i=[i,s]:(Q=a,a=n)):(Q=a,a=n)),a!==n)for(;a!==n;)r.push(a),o.test(e.charAt(Q))?(a=e.charAt(Q),Q++):(a=n,0===re&&peg$fail(u)),a===n&&(a=Q,32===e.charCodeAt(Q)?(i=c,Q++):(i=n,0===re&&peg$fail(d)),i!==n?(s=Q,re++,e.substr(Q,2)===f?(l=f,Q+=2):(l=n,0===re&&peg$fail(h)),re--,l===n?s=void 0:(Q=s,s=n),s!==n?a=i=[i,s]:(Q=a,a=n)):(Q=a,a=n));else r=n;return t=r!==n?e.substring(t,Q):r,ne[p]={nextPos:Q,result:t},t}function peg$parseChannels(){var t,r,a,i,s,l,p=11*Q+4,o=ne[p];if(o)return Q=o.nextPos,o.result;if(t=Q,r=Q,a=[],E.test(e.charAt(Q))?(i=e.charAt(Q),Q++):(i=n,0===re&&peg$fail(A)),i!==n)for(;i!==n;)a.push(i),E.test(e.charAt(Q))?(i=e.charAt(Q),Q++):(i=n,0===re&&peg$fail(A));else a=n;if(a!==n)if(46===e.charCodeAt(Q)?(i=C,Q++):(i=n,0===re&&peg$fail(N)),i!==n){if(s=[],E.test(e.charAt(Q))?(l=e.charAt(Q),Q++):(l=n,0===re&&peg$fail(A)),l!==n)for(;l!==n;)s.push(l),E.test(e.charAt(Q))?(l=e.charAt(Q),Q++):(l=n,0===re&&peg$fail(A));else s=n;s!==n?r=a=[a,i,s]:(Q=r,r=n)}else Q=r,r=n;else Q=r,r=n;return t=r!==n?e.substring(t,Q):r,ne[p]={nextPos:Q,result:t},t}function peg$parseSep(){var t,r,a=11*Q+9,i=ne[a];return i?(Q=i.nextPos,i.result):(t=Q,peg$parseWhitespace()!==n?(124===e.charCodeAt(Q)?(r=z,Q++):(r=n,0===re&&peg$fail(Z)),r!==n&&peg$parseWhitespace()!==n?t=J():(Q=t,t=n)):(Q=t,t=n),ne[a]={nextPos:Q,result:t},t)}function peg$parseWhitespace(){var t,r,a=11*Q+10,i=ne[a];if(i)return Q=i.nextPos,i.result;for(t=[],X.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=n,0===re&&peg$fail(K));r!==n;)t.push(r),X.test(e.charAt(Q))?(r=e.charAt(Q),Q++):(r=n,0===re&&peg$fail(K));return ne[a]={nextPos:Q,result:t},t}var ae,ie,se,le,pe,oe,ue,ce=function(){return" | "},de=function(e,t){"string"==typeof t&&(t=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r,e}({},t,e));var r="";for(var n in t)t.hasOwnProperty(n)&&(r+="data-"+n+'="'+t[n].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")+'"');return'<span class="userscript-highlight torrent-field" '+r+">"+e+"</span>"};if((r=i())!==n&&Q===e.length)return r;throw r!==n&&Q<e.length&&peg$fail({type:"end"}),ae=te,ie=ee<e.length?e.charAt(ee):null,le=ee,pe=ee<e.length?ee+1:ee,oe=peg$computePosDetails(le),ue=peg$computePosDetails(pe),se={start:{offset:le,line:oe.line,column:oe.column},end:{offset:pe,line:ue.line,column:ue.column}},new peg$SyntaxError(peg$SyntaxError.buildMessage(ae,ie),ae,ie,se)}}}()}]);
//# sourceMappingURL=tfm_torrent_highlighter.min.user.js.map